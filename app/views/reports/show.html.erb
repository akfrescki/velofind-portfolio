<div class="container my-5">
  <!-- header -->
  <h1 class="h3 mb-2 text-blue">Police Report</h1>
  <!-- subtitle  -->
  <p class="text-muted mb-4">
    monitoring your <strong><%= @match.bike.brand %> <%= @match.bike.model %> <%= @match.bike.frame_number %>.</strong>
  </p>

  <!-- alert  -->
  <div class="matches-alert alert-warning mb-4" role="alert">
    <div>
      <strong>Potential match found!</strong>
        Please confirm the info you will find below.
    </div>
  </div>

  <div class="container d-flex flex-column align-items-center">
    <!-- Overview and Police Report -->
    <div class="tab-container d-flex justify-content-center py-1 mb-1">
      <%= link_to "Overview", new_bike_match_report_path(@bike, @match, @report), class: "tab" %>
      <div class="tab active">Police Report</div>
    </div>


    <div class="report-container py-5">
      <div class="report-box p-4">
        <h4 class="fw-bold mb-2 text-blue-primary text-center">Report information</h4>
        <p class="text-center text-muted mb-5">Generated by Velofind Bike Recovery Service</p>

        <!-- SECTION: Victim Info -->
        <div class="report-section mb-4">
          <h6 class="section-title">üë§ Victim Information</h6>
          <div class="section-content">
            <p class="mb-1"><strong>Name:</strong> <%= @report.match.bike.user.first_name %> <%= @report.match.bike.user.last_name %></p>
            <p class="mb-1"><strong>Email:</strong> <%= @report.match.bike.user.email %></p>
            <p class="mb-0"><strong>Phone:</strong> <%= @report.match.bike.user.phone_number %></p>
          </div>
        </div>

        <!-- SECTION: Bike Info -->
        <div class="report-section mb-4">
          <h6 class="section-title">üö≤ Stolen Bicycle Details</h6>
          <div class="section-content">
              <p class="mb-1"><strong>Brand:</strong> <%= @report.match.bike.brand %></p>
              <p class="mb-1"><strong>Model:</strong> <%= @report.match.bike.model %></p>
              <p class="mb-1"><strong>Color:</strong> <%= @report.match.bike.color %></p>
              <p class="mb-1"><strong>Frame Number:</strong> <%= @report.match.bike.frame_number %></p>
              <p class="mb-1"><strong>Location Lost:</strong> <%= @report.match.bike.location_lost %></p>
              <p class="mb-0"><strong>Theft Date:</strong> <%= @report.match.bike.stolen_date %></p>
          </div>
        </div>

        <!-- SECTION: Match Info -->
        <div class="report-section mb-4">
          <h6 class="section-title">‚ö†Ô∏è Evidence Gathered</h6>
          <div class="alert-danger-report">
            <p class="mb-1"><strong>Marketplace:</strong> <%= @report.match.marketplace %></p>
            <p class="mb-1"><strong>Seller:</strong> <%= @report.match.seller %></p>
            <p class="mb-1"><strong>Location:</strong> <%= @report.match.location %></p>
            <p class="mb-1"><strong>Match Confidence:</strong> <%= @report.match.match_score %>% </p>
            <p class="mb-1"><strong>Matched Fields: </strong><%= @report.match.matched_fields&.map(&:humanize)&.to_sentence || "No matched fields" %></p>
          </div>
        </div>

        <!-- Footer -->
        <div class="report-footer mt-4 text-center text-muted small">
          <p>Report Generated By: Velofind Bike Recovery Service</p>
          <p>Contact: support@velofind.com | Website: www.velofind.com</p>
        </div>

        <!-- Buttons -->
        <div class="d-flex justify-content-center mt-4 gap-2 flex-wrap">
          <%= link_to "Download PDF", bike_match_report_path(@report.match.bike.id, @report.match.id, @report.id, format: :pdf), target: "_blank", class: "btn btn-primary-custom" %>

          <%= form_with url: send_email_bike_match_report_path(@report.match.bike.id, @report.match.id, @report.id), method: :post, class: "d-inline" do %>
            <%= submit_tag 'PDF via Email', class: "btn btn-outline-custom" %>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
